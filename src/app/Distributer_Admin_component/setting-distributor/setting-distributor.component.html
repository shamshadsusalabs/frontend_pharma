<div class="register-container">
  <mat-card class="register-card">
    <div class="card-header">
      <img src="/logo.webp" alt="Pharma Logo" class="logo" />
      <h6>{{ isEditMode ? 'Edit User Data' : 'View User Data' }}</h6>
      <p>{{ isEditMode ? 'Edit your details below.' : 'Your details are shown in view mode.' }}</p>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <!-- Row 1: 3 Fields -->
      <div class="field-row">
        <mat-form-field appearance="outline">
          <mat-label>Name</mat-label>
          <mat-icon matPrefix>person</mat-icon>
          <input matInput type="text" formControlName="name" [readonly]="!isEditMode" />
          <mat-error *ngIf="registerForm.get('name')?.hasError('required')">Name is required</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Contact</mat-label>
          <mat-icon matPrefix>phone</mat-icon>
          <input matInput type="tel" formControlName="contact" [readonly]="!isEditMode" />
          <mat-error *ngIf="registerForm.get('contact')?.hasError('required')">Contact is required</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Shop Name</mat-label>
          <mat-icon matPrefix>store</mat-icon>
          <input matInput type="text" formControlName="shopName" [readonly]="!isEditMode" />
          <mat-error *ngIf="registerForm.get('shopName')?.hasError('required')">Shop Name is required</mat-error>
        </mat-form-field>
      </div>

      <!-- Row 2: 3 Fields -->
      <div class="field-row">
        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <mat-icon matPrefix>mail</mat-icon>
          <input matInput type="email" formControlName="email" [readonly]="!isEditMode" />
          <mat-error *ngIf="registerForm.get('email')?.hasError('required')">Email is required</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
          <mat-icon matPrefix>lock</mat-icon>
          <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password" [readonly]="!isEditMode" />
          <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" *ngIf="isEditMode">
            <mat-icon>{{ hidePassword ? 'visibility' : 'visibility_off' }}</mat-icon>
          </button>
          <mat-error *ngIf="registerForm.get('password')?.hasError('required')">Password is required</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Profile Type</mat-label>
          <mat-select formControlName="profile" [disabled]="!isEditMode">
            <mat-option value="Brand">Brand</mat-option>
            <mat-option value="Distributor">Distributor</mat-option>
            <mat-option value="Store">Store</mat-option>
          </mat-select>
          <mat-error *ngIf="registerForm.get('profile')?.hasError('required')">Profile Type is required</mat-error>
        </mat-form-field>
      </div>

      <!-- Row 3: 2 Fields -->
      <div class="field-row">
        <mat-form-field appearance="outline">
          <mat-label>Licence Image</mat-label>
          <ngx-mat-file-input formControlName="Licence" (change)="onFileSelect($event, 'Licence')" [disabled]="!isEditMode"></ngx-mat-file-input>
          <mat-error *ngIf="registerForm.get('Licence')?.hasError('required')">Licence Image is required</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>GSTIN Image</mat-label>
          <ngx-mat-file-input formControlName="Gstin" (change)="onFileSelect($event, 'Gstin')" [disabled]="!isEditMode"></ngx-mat-file-input>
          <mat-error *ngIf="registerForm.get('Gstin')?.hasError('required')">GSTIN Image is required</mat-error>
        </mat-form-field>
      </div>

      <!-- Row 4: 2 Fields -->
      <div class="field-row">
        <mat-form-field appearance="outline">
          <mat-label>GST Number</mat-label>
          <input matInput type="text" formControlName="gstNumber" [readonly]="!isEditMode" />
          <mat-error *ngIf="registerForm.get('gstNumber')?.hasError('required')">GST Number is required</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>License Number</mat-label>
          <input matInput type="text" formControlName="licenseNumber" [readonly]="!isEditMode" />
          <mat-error *ngIf="registerForm.get('licenseNumber')?.hasError('required')">License Number is required</mat-error>
        </mat-form-field>
      </div>

      <!-- Row 5: 1 Address Field -->
      <div class="address-row">
        <mat-form-field appearance="outline">
          <mat-label>Address</mat-label>
          <textarea matInput formControlName="address" rows="1" [readonly]="!isEditMode"></textarea>
          <mat-error *ngIf="registerForm.get('address')?.hasError('required')">Address is required</mat-error>
        </mat-form-field>
      </div>

      <!-- Submit Button -->
      <button mat-raised-button color="primary" type="submit" [disabled]="registerForm.invalid" *ngIf="isEditMode">
        Save Changes
      </button>

      <!-- Edit Button -->
      <button mat-raised-button color="accent" (click)="toggleEditMode()" *ngIf="!isEditMode">
        Edit
      </button>
    </form>
  </mat-card>
</div>
