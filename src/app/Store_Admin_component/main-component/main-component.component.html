<div class="dashboard-container">
  <h1>Dashboard</h1>
  <p>A quick data overview of the inventory.</p>

  <!-- Summary Cards Section -->
  <div class="summary-cards">
    <div class="card" style="border-color: #5cd18a;">
      <mat-icon class="card-icon" style="color: #5cd18a;">shield</mat-icon>
      <div class="card-content">
        <p>Total Type of Drugs</p>
        <!-- Corrected the interpolation to display the actual value -->
        <span *ngIf="totalTypeofdrugs" style="font-size: 30px;">{{ totalTypeofdrugs.totalTypeofdrugs }}</span>

      </div>
      <button mat-button routerLink="../store-view-drugs">View Detailed Report &raquo;</button>
    </div>

    <div class="card" style="border-color: #f0c22b;">
      <mat-icon class="card-icon" style="color: #f0c22b;">attach_money</mat-icon>
      <div class="card-content">
        <p *ngIf="totalRevenue?.totalRevenue">{{ totalRevenue.totalRevenue }}</p>
        <span>Revenue: {{ today | date: 'MMM yyyy' }}</span>
      </div>
      <button mat-button class="detail-btn" routerLink="../invoice">View Detailed Report &raquo;</button>
    </div>


    <div class="card" style="border-color: #62b9f3;">
      <mat-icon class="card-icon" style="color: #f55a5a;">warning</mat-icon>
      <div class="card-content">
        <!-- Directly access the totalCount property of totalCount -->
        <p *ngIf="totalCount?.totalCount !== undefined">{{totalCount.totalCount}}</p>
        <span>Medicine Shortage</span>
      </div>
      <button mat-button class="detail-btn"  routerLink="../low-stock">Resolve Now &raquo;</button>
    </div>



    <div class="card" style="border-color: #f55a5a;">
      <mat-icon class="card-icon" style="color: #f55a5a;">warning</mat-icon>
      <div class="card-content">
        <p *ngIf="totalCountExpiry?.totalCountExpiry!== undefined">{{totalCountExpiry.totalCountExpiry}}</p>
        <span>Medicine Expiry</span>
      </div>
      <button mat-button class="detail-btn"   routerLink="../expiry-stock">Resolve Now &raquo;</button>
    </div>
  </div>

  <!-- Data Panels Section -->
  <div class="data-panels">
    <mat-card class="panel">
      <mat-card-header>
        <mat-card-title>Inventory</mat-card-title>
        <button mat-button class="config-btn">Go to Configuration &raquo;</button>
      </mat-card-header>
      <mat-card-content>
        <p>298 Total no of Medicines, 24 Medicine Groups</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="panel">
      <mat-card-header>
        <mat-card-title>Quick Report</mat-card-title>
        <!-- Display dynamic month here, using the 'today' variable -->
        <button mat-button class="config-btn">{{ today | date: 'MMM yyyy' }} &raquo;</button>
      </mat-card-header>
      <mat-card-content>
        <!-- Safe navigation operator to avoid errors if data is not yet loaded -->
        <p *ngIf="getInvoiceperMonth">
          {{ getInvoiceperMonth.totalQuantity }} Qty of Medicines Sold,
          {{ getInvoiceperMonth.totalDocuments }} Invoices Generated
        </p>
      </mat-card-content>
    </mat-card>



    <mat-card class="panel">
      <mat-card-header>
        <mat-card-title>Total Distributor</mat-card-title>
        <button mat-button class="config-btn">Go to Distributor &raquo;</button>
      </mat-card-header>
      <mat-card-content>
        <p *ngIf="distributorCount; else loading">
          {{ distributorCount.count }} Total no of Distributors
        </p>
        <ng-template #loading>
          <p>Loading distributor data...</p>
        </ng-template>
      </mat-card-content>
    </mat-card>


    <mat-card class="panel">
      <mat-card-header>
        <mat-card-title>Total Brand</mat-card-title>
        <button mat-button class="config-btn">Go to Brand &raquo;</button>
      </mat-card-header>
      <mat-card-content>
        <p *ngIf="brandCount; else loading">
          {{ brandCount.count }} Total no of Brand
        </p>
        <ng-template #loading>
          <p>Loading Brand data...</p>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>
</div>
